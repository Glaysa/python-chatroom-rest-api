{% extends "base.html" %}
{% block title %}Chat Room{% endblock %}

{% block page %}
    <div class="d-flex p-2 mt-2 justify-content-around align-items-center">
        <h5 class="fs-4 col-md-3">{{ room.name }}</h5>
        <a href="/home" class="col-md-1 fs-4 btn btn-secondary">Home</a>
    </div>

    <div class="p-2 d-flex flex-column justify-content-center border border-1 rounded mx-auto" style="min-height:600px; overflow-y: scroll; color: whitesmoke; background-color: aliceblue;width: 40%;">
        {% for msg in room.messages %}
            {% if msg.sender == user %}
                <div class="col-md-5 bg-primary mb-3 align-self-end border rounded-pill">
                    <p class="p-0 fs-6 text-md-center m-2">{{ msg.content.message }}</p>
                </div>
            {% else %}
                <div class="col-md-5 bg-secondary mt-3 align-self-start border rounded-pill">
                    <p class="p-0 fs-6 text-md-center m-2">{{ msg.content.message }}</p>
                </div>
            {% endif %}
        {% endfor %}
    </div>

    <div class="d-flex p-2 mt-2 justify-content-around align-items-center">
        <form action="/api/room/{{ room.room_id }}/{{ user.usr_id }}/messages" method="post" class="form w-50">
            <div class="form-group">
                <input type="text" name="message" placeholder="type here..." required class="form-control input-group">
                <input type="submit" name="reply-btn" value="Send" class="btn btn-primary mt-3 input-group">
            </div>
        </form>
    </div>
{% endblock %}
